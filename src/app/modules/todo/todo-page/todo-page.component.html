<div class="container">
  <form [formGroup]="todoForm" (submit)="addTodo()">

    <div class="form-group">
      <label for="name">Todo name:</label>
      <input formControlName="name" type="text" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.name.errors }" id="name"
        autocomplete='name' aria-describedby="nameHelp" placeholder="Enter name">
      <div *ngIf="submitted && f.name.errors" class="invalid-feedback">
        <div *ngIf="f.name.errors.required">Name is required</div>
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description:</label>
      <input formControlName="description" type="text" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.description.errors }"
        id="description" autocomplete='description' aria-describedby="descriptionHelp" placeholder="Enter description">
      <div *ngIf="submitted && f.description.errors" class="invalid-feedback">
        <div *ngIf="f.description.errors.required">Description is required</div>
      </div>
    </div>

    <button type="submit" [disabled]="todoForm.pristine || todoForm.invalid" class="btn btn-primary">Add Todo
    </button>
  </form>

  <div class="btn-group btn-group-justified top-padded" role="group">
    <div class="btn-group" role="group">
      <button type="button" class="btn btn-default" (click)="setVisibilityFilter('all')">Show All</button>
    </div>
    <div class="btn-group" role="group">
      <button type="button" class="btn btn-default" (click)="setVisibilityFilter('finished')">Show Done</button>
    </div>
    <div class="btn-group" role="group">
      <button type="button" class="btn btn-default" (click)="setVisibilityFilter('notFinished')">Show Not Done</button>
    </div>
  </div>

  <div class="form-group row top-padded" *ngIf="todos; else noTodos">
    <div class="col-sm-6 col-s-12 card" *ngFor="let todo of todos ">
      <div class="panel">
        <div class="card-body" id='todoDiv'>
          <h5 class="card-title">
            <b>Todo:</b>
            {{todo.name}}
          </h5>
          <p class="card-text">
            <b>Description:</b>
            {{todo.description}}
          </p>
          <p class="card-text">
            <b>Finished:</b>
            {{todo.finished}}
          </p>
          <p class="card-text" *ngIf="todo.finished">
            <b>FinishedAt:</b>
            {{todo.finishedAt}}
          </p>
          <td>
            <button (click)="deleteTodo(todo)" class="btn btn-danger">Delete</button>
          </td>
          <td>
            <button (click)="openEditModal(todo)" class="btn btn-success">Edit</button>
          </td>
          <td *ngIf="!todo.finished">
            <button (click)="markDone(todo)" class="btn btn-primary">Mark Done</button>
          </td>
        </div>
      </div>
    </div>
  </div>

  <ng-template #noTodos>
    <h2>No todos to show :(</h2>
  </ng-template>
</div>